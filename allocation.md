# Методы распределения целей в рое дронов

Документ описывает три ключевых подхода к децентрализованному распределению целевых точек между беспилотными летательными аппаратами (БПЛА):
1. **Аукционный метод (Auction-based)**
2. **Метод на основе графов Вороного (Voronoi-based)**
3. **K-Means кластеризация (K-Means-based)**

Каждый метод имеет свои преимущества в зависимости от наличия связи, геометрии карты и ограничений по вычислениям.

---

## Аукционный метод (Auction-based Allocation)

### Идея
Каждый дрон выступает как «агент», предлагающий свою цену (ставку) за выполнение задачи.  
Задачи (цели) распределяются через децентрализованный аукцион, где побеждает минимальная ставка (минимальная стоимость пути, времени или энергии).

### Алгоритм
1. Дрон, обнаружив цель, публикует сообщение `DISCOVER(target_id, pos, type, confidence)`.
2. Все дроны подходящего типа вычисляют **стоимость назначения**:
   \[
   C_{ij} = \alpha \, t_{\text{flight}} + \beta \, \text{turn\_angle} + \gamma \, \text{risk} + \delta \, \text{reassign\_penalty}
   \]
3. Каждый публикует `BID(target_id, drone_id, cost, eta)`.
4. После таймаута τ отправитель выбирает **победителя** с минимальным `cost`.
5. Победитель получает `AWARD` и резервирует цель на время `ttl`.

### Особенности
- Работает **в mesh-сети** (локальные трансляции, без центра).
- Распределение гибкое и устойчивое к потере связи.
- Конфликты решаются таймаутами и приоритетами (`ID`, `ETA`).

### Плюсы
- Хорошо масштабируется.
- Простая логика и низкий трафик.
- Быстрая реакция на появление новых целей.

### Минусы
- Не всегда глобально оптимально.
- Требует синхронизации ставок (аукционные окна).
- При большом шуме возможны колебания назначений.

---

## Метод графов Вороного (Voronoi-based Partitioning)

### Идея
Пространство делится на **зоны ответственности** каждого дрона на основе *диаграмм Вороного*:
каждый участок принадлежит ближайшему дрону с учётом геометрии и препятствий.

### Алгоритм
1. Определяются текущие позиции всех дронов \( p_i \).
2. Строится **диаграмма Вороного** по метрике расстояния (евклидовой или по пути на графе).
3. Каждая ячейка Вороного \( V_i \) содержит цели, ближайшие к дрону \( i \):
   \[
   V_i = \{x \mid d(x, p_i) < d(x, p_j), \forall j \neq i \}
   \]
4. Для реальной среды применяется **ограниченная (constrained) диаграмма** — границы обрезаются препятствиями.
5. Цели внутри каждой области закрепляются за её владельцем.

### Особенности
- Простая геометрическая интерпретация.
- Работает без частой пересылки данных (если позиции дронов известны).
- Хорошо подходит для **равномерного покрытия и разведки**.

### Плюсы
- Естественное разделение зон без дублирования.
- Масштабируется до больших роев.
- Может работать и без связи (при известной карте).

### Минусы
- Требует точного позиционирования и карты.
- При динамике (перемещении дронов) нужно пересчитывать.
- Не учитывает «вес» задач напрямую (только геометрию).

---

## K-Means кластеризация (K-Means-based Partitioning)

### Идея
Все цели (или ячейки карты) делятся на \( K \) кластеров — по числу дронов.
Каждый дрон получает ближайший кластер, центр которого минимизирует суммарное расстояние до точек.

### Алгоритм
1. Инициализировать случайные центры кластеров \( C_1, ..., C_K \).
2. Назначить каждую цель \( t_j \) ближайшему центру:
   \[
   \text{assign}(t_j) = \arg\min_i d(t_j, C_i)
   \]
3. Пересчитать центры как среднее своих целей:
   \[
   C_i = \frac{1}{|T_i|}\sum_{t_j \in T_i} t_j
   \]
4. Повторять шаги 2–3 до сходимости.
5. Каждому дрону назначить свой кластер.

### Особенности
- Применяется в дискретных (grid-based) картах.
- Прост в реализации и стабилен на малых областях.
- Используется в классическом алгоритме координированной разведки (Wu et al., 2007).

### Плюсы
- Простота, быстрая сходимость.
- Подходит для **небольших карт и фиксированных целей**.
- Легко расширяется до взвешенных задач (Weighted K-Means).

### Минусы
- Не учитывает препятствия напрямую.
- Высокая сложность при больших картах (O(NK)).
- Требует центрального расчёта и обмена состоянием.

---

## Сравнительная таблица

| Критерий                         | Аукцион            | Вороной              | K-Means             |
|----------------------------------|--------------------|----------------------|---------------------|
| Тип координации                  | Децентрализованный | Геометрический       | Централизованный    |
| Требует карту                    | Нет (локально)     | Да                   | Желательно          |
| Требует связи                    | Да (mesh)          | Необязательно        | Да (общая карта)    |
| Учёт типов/ролей                 | Легко              | Только геометрически | Дополнительная логика |
| Масштабируемость                 | Высокая            | Средняя–высокая      | Низкая              |
| Энергозатраты на вычисления      | Средние            | Низкие               | Высокие             |
| Подходит для динамических целей  | ✅ Да               | ⚠️ С пересчётом      | ❌ Плохо            |

---

## Рекомендации по выбору

| Условия                              | Рекомендуемый метод |
|-------------------------------------|----------------------|
| Есть mesh-сеть и цели появляются динамически | **Аукцион (Auction)** |
| Карта известна, важна геометрия и равномерное покрытие | **Графы Вороного (Voronoi)** |
| Небольшая фиксированная сцена и ограниченные ресурсы | **K-Means** |

---

## Источники
- Wu, L., García, M. A., Puig, D., & Solé, A. (2007). *Voronoi-Based Space Partitioning for Coordinated Multi-Robot Exploration.* Journal of Physical Agents, 1(1), 37–44.  
- Zlot, R. M., & Stentz, A. (2002). *Market-based multi-robot coordination for complex tasks.*  
- Bellingham, J. et al. (2002). *Multi-UAV cooperative control with auction mechanisms.*

---
